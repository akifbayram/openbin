# OpenBin Documentation Site â€” Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Build a VitePress documentation site in `/docs/` deployed to GitHub Pages at `https://akifbayram.github.io/openbin`.

**Architecture:** VitePress project lives in `/docs/` with a `.vitepress/config.ts` for nav/sidebar/theme. GitHub Actions triggers on `docs/**` changes and deploys the built output to `gh-pages`. Five agents build in sequence: PM scaffolds first, then Agents 1/2/3 write content in parallel, then Agent 4 polishes.

**Tech Stack:** VitePress (latest), Node 20, GitHub Actions, `peaceiris/actions-gh-pages@v4`

**Build verification command (run after every task):** `cd docs && npm run build`

---

## TASK 1 (PM Agent): Scaffold VitePress

**Files:**
- Create: `docs/package.json`
- Create: `docs/.vitepress/config.ts`
- Create: `docs/.vitepress/theme/index.ts`
- Create: `docs/.vitepress/theme/custom.css`
- Create: `docs/index.md`
- Create: `docs/public/.gitkeep`

**Step 1: Create `docs/package.json`**

```json
{
  "name": "openbin-docs",
  "version": "1.0.0",
  "private": true,
  "scripts": {
    "dev": "vitepress dev",
    "build": "vitepress build",
    "preview": "vitepress preview"
  },
  "devDependencies": {
    "vitepress": "^1.6.3"
  }
}
```

**Step 2: Install dependencies**

```bash
cd docs && npm install
```

Expected: `node_modules/` created, `package-lock.json` written.

**Step 3: Create `docs/.vitepress/config.ts`**

```ts
import { defineConfig } from 'vitepress'

export default defineConfig({
  title: 'OpenBin',
  description: 'Self-hosted bin inventory with QR codes and AI',
  base: '/openbin/',
  themeConfig: {
    logo: '/logo.png',
    nav: [
      { text: 'Guide', link: '/guide/' },
      { text: 'API', link: '/api/' },
      { text: 'GitHub', link: 'https://github.com/akifbayram/openbin' }
    ],
    sidebar: {
      '/getting-started/': [
        {
          text: 'Getting Started',
          items: [
            { text: 'Overview', link: '/getting-started/' },
            { text: 'Docker', link: '/getting-started/docker' },
            { text: 'Local Development', link: '/getting-started/local-dev' },
            { text: 'Configuration', link: '/getting-started/configuration' }
          ]
        }
      ],
      '/guide/': [
        {
          text: 'User Guide',
          items: [
            { text: 'Overview', link: '/guide/' },
            { text: 'Locations & Areas', link: '/guide/locations' },
            { text: 'Bins', link: '/guide/bins' },
            { text: 'QR Scanning', link: '/guide/qr-scanning' },
            { text: 'Print Labels', link: '/guide/print-labels' },
            { text: 'AI Features', link: '/guide/ai' },
            { text: 'Search & Filter', link: '/guide/search-filter' },
            { text: 'Bulk Operations', link: '/guide/bulk-operations' },
            { text: 'Photos', link: '/guide/photos' },
            { text: 'Import & Export', link: '/guide/import-export' },
            { text: 'Dashboard', link: '/guide/dashboard' },
            { text: 'API Keys', link: '/guide/api-keys' }
          ]
        }
      ],
      '/api/': [
        {
          text: 'API Reference',
          items: [
            { text: 'Overview', link: '/api/' },
            { text: 'Endpoints', link: '/api/reference' }
          ]
        }
      ]
    },
    socialLinks: [
      { icon: 'github', link: 'https://github.com/akifbayram/openbin' }
    ],
    search: {
      provider: 'local'
    },
    footer: {
      message: 'Released under the GPL-3.0 License.',
      copyright: 'OpenBin'
    }
  }
})
```

**Step 4: Create `docs/.vitepress/theme/index.ts`**

```ts
import DefaultTheme from 'vitepress/theme'
import './custom.css'

export default DefaultTheme
```

**Step 5: Create `docs/.vitepress/theme/custom.css`**

```css
:root {
  --vp-c-brand-1: #3b82f6;
  --vp-c-brand-2: #06b6d4;
  --vp-c-brand-3: #0ea5e9;
  --vp-c-brand-soft: rgba(59, 130, 246, 0.14);
  --vp-home-hero-name-color: transparent;
  --vp-home-hero-name-background: linear-gradient(120deg, #3b82f6, #06b6d4);
}
```

**Step 6: Create `docs/index.md` (homepage)**

```markdown
---
layout: home

hero:
  name: "OpenBin"
  text: "Self-hosted bin inventory"
  tagline: "Organize physical storage bins with QR codes and AI. Print labels, scan to find, ask where things are."
  actions:
    - theme: brand
      text: Get Started â†’
      link: /getting-started/
    - theme: alt
      text: View on GitHub
      link: https://github.com/akifbayram/openbin

features:
  - icon: ðŸ“¦
    title: QR Scanning
    details: Scan any bin's QR label with your phone camera to instantly see its contents.
  - icon: ðŸ¤–
    title: AI Photo Analysis
    details: Snap a photo of a bin and AI names it, lists every item, suggests tags, and adds notes.
  - icon: ðŸ–¨ï¸
    title: Print Labels
    details: Generate and print QR label sheets with customizable formats, sizes, and styles.
  - icon: ðŸ‘¥
    title: Multi-user
    details: Share locations with invite codes. Role-based access with per-location areas.
  - icon: ðŸ”
    title: Search & Filter
    details: Search by name, items, tags, areas, or colors. Save filter presets for quick access.
  - icon: ðŸ”Œ
    title: REST API
    details: Long-lived API keys for headless access and automation. Full OpenAPI spec included.
---
```

**Step 7: Create `docs/public/.gitkeep`**

```bash
touch docs/public/.gitkeep
```

**Step 8: Verify build passes**

```bash
cd docs && npm run build
```

Expected: `docs/.vitepress/dist/` created with no errors.

**Step 9: Create placeholder stub files** so Agent 1/2/3 have directories to write into:

```bash
mkdir -p docs/getting-started docs/guide docs/api

# Getting started stubs
cat > docs/getting-started/index.md << 'EOF'
# Getting Started
<!-- Agent 1: fill this in -->
EOF
cat > docs/getting-started/docker.md << 'EOF'
# Docker Quick Start
<!-- Agent 1: fill this in -->
EOF
cat > docs/getting-started/local-dev.md << 'EOF'
# Local Development
<!-- Agent 1: fill this in -->
EOF
cat > docs/getting-started/configuration.md << 'EOF'
# Configuration Reference
<!-- Agent 1: fill this in -->
EOF

# Guide stubs
for page in index locations bins qr-scanning print-labels ai search-filter bulk-operations photos import-export dashboard api-keys; do
  cat > docs/guide/$page.md << 'EOF'
# Placeholder
<!-- Agent 2: fill this in -->
EOF
done

# API stubs
cat > docs/api/index.md << 'EOF'
# API Overview
<!-- Agent 3: fill this in -->
EOF
cat > docs/api/reference.md << 'EOF'
# API Reference
<!-- Agent 3: fill this in -->
EOF
```

**Step 10: Verify build still passes**

```bash
cd docs && npm run build
```

**Step 11: Commit**

```bash
git add docs/
git commit -m "feat(docs): scaffold VitePress site with theme and nav config"
```

---

## TASK 2 (Agent 1): Getting Started & Configuration

**Files to write (replace stub content):**
- `docs/getting-started/index.md`
- `docs/getting-started/docker.md`
- `docs/getting-started/local-dev.md`
- `docs/getting-started/configuration.md`

**Source to read first:**
- `README.md` (Quick Start, Configuration table)
- `.env.example` (all env vars with descriptions)
- `docker-compose.yml` (volumes, ports)
- `Dockerfile` (build stages)

**Step 1: Write `docs/getting-started/index.md`**

```markdown
---
title: Getting Started
---

# Getting Started

OpenBin is a self-hosted web application for organizing physical storage bins with QR codes.
It runs as a single Docker container â€” no external database or services required.

## Prerequisites

- **Docker** (recommended) â€” [install Docker](https://docs.docker.com/get-docker/)
- **OR Node.js 20+** for local development without Docker

## Choose your setup

| Method | Best for |
|---|---|
| [Docker](./docker) | Production, home server, quick evaluation |
| [Local Development](./local-dev) | Contributing, modifying the source |

## First Steps

Once running, open the app and:

1. Register an account
2. Create a location (your home, workshop, garage, etc.)
3. Add bins and start tracking contents

See the [User Guide](/guide/) for a full walkthrough.
```

**Step 2: Write `docs/getting-started/docker.md`**

Content should cover:
- Prerequisites (Docker)
- `git clone` + `docker compose up -d`
- Default URL: `http://localhost:1453`
- How to change the port (`HOST_PORT` env var)
- Persistent data: the SQLite DB lives in a Docker volume at `/data/openbin.db`
- How to update: `docker compose pull && docker compose up -d`
- Viewing logs: `docker compose logs -f`

Reference `docker-compose.yml` for accurate volume/port details.

**Step 3: Write `docs/getting-started/local-dev.md`**

Content should cover:
- Prerequisites: Node.js 20+
- Clone + `npm install` + `cd server && npm install`
- Two terminal approach: `cd server && npm run dev` (API at :3000) + `npm run dev` (frontend at :5173)
- How env vars work in dev (`.env` file)
- Type checking: `npx tsc --noEmit` and `cd server && npx tsc --noEmit`
- Tests: `npx vitest run`
- Production build: `npx vite build`

**Step 4: Write `docs/getting-started/configuration.md`**

Full table of all env vars from `.env.example`. Group them by category exactly as the file does:

| Variable | Default | Description |
|---|---|---|

Categories: Docker, Server, Authentication, Upload Limits, AI Provider, AI Encryption, Backups, Rate Limiting, Advanced.

Include a note that no configuration is required to run â€” all vars have safe defaults.

**Step 5: Verify build**

```bash
cd docs && npm run build
```

Expected: no errors.

**Step 6: Commit**

```bash
git add docs/getting-started/
git commit -m "docs: add getting started and configuration sections"
```

---

## TASK 3 (Agent 2): User Guide

**Files to write (replace stub content):**
- `docs/guide/index.md`
- `docs/guide/locations.md`
- `docs/guide/bins.md`
- `docs/guide/qr-scanning.md`
- `docs/guide/print-labels.md`
- `docs/guide/ai.md`
- `docs/guide/search-filter.md`
- `docs/guide/bulk-operations.md`
- `docs/guide/photos.md`
- `docs/guide/import-export.md`
- `docs/guide/dashboard.md`
- `docs/guide/api-keys.md`

**Source to read first:**
- `README.md` (Features list)
- `src/features/` directory listing to understand all features
- `CLAUDE.md` feature descriptions
- `server/openapi.yaml` for endpoint behaviors

**Step 1: Write `docs/guide/index.md`**

Overview page with a table linking to each guide section, one-sentence description per section.

**Step 2: Write `docs/guide/locations.md`**

Cover:
- What a location is (a shared space â€” e.g. "Home", "Workshop")
- Creating a location
- Joining with an invite code
- Areas â€” sub-zones within a location (e.g. "Garage", "Attic")
- Managing members and roles (admin vs member)
- Customizable terminology (renaming "Bin", "Area", "Location" per location)

**Step 3: Write `docs/guide/bins.md`**

Cover:
- What a bin is
- Creating a bin (name, area, items, tags, notes, icon, color, card style)
- Card styles: glass, border, gradient, stripe, photo
- Editing a bin
- Visibility: location vs private
- Soft delete and trash recovery

**Step 4: Write `docs/guide/qr-scanning.md`**

Cover:
- How QR codes work in OpenBin (each bin has a unique short code)
- Using the camera scanner
- Manual short code lookup
- Scan history
- Pinning bins for quick access

**Step 5: Write `docs/guide/print-labels.md`**

Cover:
- Navigating to the print page
- Selecting bins to print
- Label formats (colored-card, plain-qr, icon-only, text-only)
- Page size and orientation options
- Custom label size
- QR style customization (dot/corner styles, colors)
- Saving format presets
- PDF export

**Step 6: Write `docs/guide/ai.md`**

Cover:
- Supported providers: OpenAI, Anthropic, Gemini, OpenAI-compatible (e.g. Ollama)
- Per-user configuration (Settings â†’ AI)
- Server-wide AI via env vars (admin setup)
- Photo analysis: snap a photo â†’ AI names bin, lists items, suggests tags, adds notes
- Natural language commands: "Add screwdriver to the tools bin", "Move batteries to garage"
- Inventory search: "Where did I put the holiday lights?"
- Custom prompts
- BYO API key â€” fully optional

**Step 7: Write `docs/guide/search-filter.md`**

Cover:
- Search bar (searches name, items, tags, notes)
- Filter panel: by tag, area, color, visibility
- Sort options
- Saved views â€” saving a filter/sort preset with a name
- Loading saved views from dashboard

**Step 8: Write `docs/guide/bulk-operations.md`**

Cover:
- How to enter multi-select mode (long-press on mobile, checkbox on desktop)
- Select all / deselect all
- Bulk tag
- Bulk move to area or location
- Bulk delete
- Bulk appearance (icon, color, card style)
- Bulk visibility

**Step 9: Write `docs/guide/photos.md`**

Cover:
- Attaching photos to a bin (up to 5 per bin)
- Viewing the photo gallery
- Thumbnails (auto-generated)
- Using photos with AI analysis
- Max upload size (configurable via `MAX_PHOTO_SIZE_MB`)

**Step 10: Write `docs/guide/import-export.md`**

Cover:
- Export formats: JSON (with or without photos as base64), CSV
- ZIP export (JSON + original photo files)
- Import: drag-and-drop JSON or ZIP
- Version compatibility (v1 legacy format and v2 current format)

**Step 11: Write `docs/guide/dashboard.md`**

Cover:
- Stats bar (total bins, areas, items)
- Pinned bins section
- Recently scanned bins
- Recently updated bins
- Needs-organizing queue
- Saved views quick access

**Step 12: Write `docs/guide/api-keys.md`**

Cover:
- What API keys are for (headless access, automation, scripts)
- Creating a key (Settings â†’ API Keys)
- Key format: `sk_openbin_...`
- Using a key: `Authorization: Bearer sk_openbin_...`
- Revoking a key
- Difference from JWT tokens

**Step 13: Verify build**

```bash
cd docs && npm run build
```

Expected: no errors.

**Step 14: Commit**

```bash
git add docs/guide/
git commit -m "docs: add complete user guide section (12 pages)"
```

---

## TASK 4 (Agent 3): API Reference

**Files to write (replace stub content):**
- `docs/api/index.md`
- `docs/api/reference.md`

**Source to read first:**
- `server/openapi.yaml` (full 3856-line OpenAPI spec)
- Focus on: auth schemes, request/response envelopes, all tags and their endpoints

**Step 1: Write `docs/api/index.md`**

```markdown
---
title: API Overview
---

# API Overview

OpenBin exposes a REST API under `/api`. The full OpenAPI 3.0 spec is at
[`server/openapi.yaml`](https://github.com/akifbayram/openbin/blob/main/server/openapi.yaml).

## Base URL

When running locally: `http://localhost:3000/api`
When running via Docker: `http://localhost:1453/api`

## Authentication

Three methods are supported:

### 1. httpOnly Cookies (recommended for browser use)

Login via `POST /api/auth/login`. The server sets two httpOnly cookies automatically:
- `openbin-access` â€” short-lived (15 min) access token
- `openbin-refresh` â€” long-lived (7 days) refresh token

Browsers send these automatically. No manual token handling needed.

### 2. Bearer Token (JWT)

```http
Authorization: Bearer <jwt_token>
```

The JWT is returned in the login response body for backward compatibility.

### 3. API Key

```http
Authorization: Bearer sk_openbin_<key>
```

Long-lived keys created via `POST /api/api-keys`. See [API Keys](/guide/api-keys).

## Response Envelopes

**List responses:**
```json
{ "results": [], "count": 0 }
```

**Error responses:**
```json
{ "error": "NOT_FOUND", "message": "Bin not found" }
```

**Error codes:** `VALIDATION_ERROR`, `NOT_FOUND`, `FORBIDDEN`, `CONFLICT`, `RATE_LIMITED`, `INTERNAL_ERROR`

## API Tags / Groups

| Group | Description |
|---|---|
| Auth | Register, login, profile, avatar, token refresh |
| Locations | Location CRUD, membership, invite codes |
| Areas | Named zones within a location |
| Bins | Bin CRUD, soft deletes, QR lookup, photos, tags |
| Photos | Photo retrieval and deletion |
| TagColors | Per-location tag color assignments |
| PrintSettings | Per-user print label settings |
| Export | JSON/ZIP/CSV export and import |
| AI | AI provider settings and image analysis |
| Activity | Location activity log |
| ApiKeys | API key management |
| UserPreferences | Per-user app preferences |
| SavedViews | Saved bin list filter/sort views |
| ScanHistory | Per-user QR scan history |
| Batch | Execute multiple bin operations in one transaction |
```

**Step 2: Write `docs/api/reference.md`**

Parse `server/openapi.yaml` and generate a readable reference. Group endpoints by tag. For each endpoint include:
- Method + path (e.g. `GET /api/bins`)
- One-sentence description
- Key request parameters or body fields (summarized, not exhaustive)
- Key response fields

Format each group as an H2 (`## Auth`), each endpoint as an H3 (`### GET /api/auth/me`).

The full YAML has 15 tag groups. Cover all of them. Use code blocks for request/response examples where the YAML has them.

::: tip
For the definitive spec, see the raw [`server/openapi.yaml`](https://github.com/akifbayram/openbin/blob/main/server/openapi.yaml) or run the app and visit `/api-docs/` (requires nginx proxy).
:::

**Step 3: Verify build**

```bash
cd docs && npm run build
```

**Step 4: Commit**

```bash
git add docs/api/
git commit -m "docs: add API overview and reference section"
```

---

## TASK 5 (Agent 4): Polish & GitHub Actions

**Files to create/modify:**
- `.github/workflows/docs.yml` (create)
- `docs/index.md` (polish homepage)
- All pages â€” review for consistency

**Source to read first:**
- All files under `docs/` written by Agents 1/2/3
- The design doc at `docs/plans/2026-02-28-docs-site-design.md`

**Step 1: Create `.github/workflows/docs.yml`**

```yaml
name: Deploy Docs

on:
  push:
    branches: [main]
    paths: ['docs/**']
  workflow_dispatch:

permissions:
  contents: write

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'
          cache-dependency-path: docs/package-lock.json

      - name: Install dependencies
        run: npm ci
        working-directory: docs

      - name: Build docs
        run: npm run build
        working-directory: docs

      - name: Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v4
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: docs/.vitepress/dist
```

**Step 2: Review all guide pages for consistency**

Check every file under `docs/guide/` and `docs/getting-started/`:
- Consistent heading hierarchy (H1 title, H2 sections, H3 subsections)
- All VitePress callout containers use correct syntax: `::: tip`, `::: warning`, `::: danger`, `::: details`
- No broken internal links (all `[text](/path)` links point to real pages)
- Each page has a one-sentence intro paragraph before diving into details

**Step 3: Polish the homepage `docs/index.md`**

Ensure the feature grid descriptions are punchy (one sentence each, max 15 words). Check the hero tagline reads well.

**Step 4: Add `docs/.vitepress/config.ts` edit outline**

Update the `editLink` in config to point to GitHub:

```ts
// Inside themeConfig:
editLink: {
  pattern: 'https://github.com/akifbayram/openbin/edit/main/docs/:path',
  text: 'Edit this page on GitHub'
},
```

**Step 5: Add `docs/.gitignore`**

```
node_modules/
.vitepress/dist
.vitepress/cache
```

**Step 6: Final build verification**

```bash
cd docs && npm run build
```

Expected: clean build, no broken links reported.

**Step 7: Commit**

```bash
git add .github/workflows/docs.yml docs/.gitignore docs/.vitepress/config.ts docs/index.md
git commit -m "docs: add GitHub Actions deploy workflow and polish site"
```

---

## Final Verification

After all 5 tasks complete:

```bash
# Full clean build
cd docs && rm -rf .vitepress/dist .vitepress/cache && npm run build

# Check no stub placeholders remain
grep -r "Agent [0-9]: fill" docs/ --include="*.md"
# Expected: no output (all stubs replaced)
```

Push to `main` and verify GitHub Actions deploys to `https://akifbayram.github.io/openbin`.
