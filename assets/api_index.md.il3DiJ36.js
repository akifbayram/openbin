import{_ as e,o as s,c as a,ag as i}from"./chunks/framework.BRz7bqS8.js";const u=JSON.parse('{"title":"API Overview","description":"","frontmatter":{"title":"API Overview"},"headers":[],"relativePath":"api/index.md","filePath":"api/index.md"}'),o={name:"api/index.md"};function r(n,t,d,l,h,p){return s(),a("div",null,[...t[0]||(t[0]=[i(`<h1 id="api-overview" tabindex="-1">API Overview <a class="header-anchor" href="#api-overview" aria-label="Permalink to &quot;API Overview&quot;">​</a></h1><p>OpenBin exposes a REST API under <code>/api</code>. The full OpenAPI 3.0 spec is at <a href="https://github.com/akifbayram/openbin/blob/main/server/openapi.yaml" target="_blank" rel="noreferrer"><code>server/openapi.yaml</code></a> in the repository.</p><h2 id="base-url" tabindex="-1">Base URL <a class="header-anchor" href="#base-url" aria-label="Permalink to &quot;Base URL&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Environment</th><th>URL</th></tr></thead><tbody><tr><td>Docker (default)</td><td><code>http://localhost:1453/api</code></td></tr><tr><td>Local development</td><td><code>http://localhost:3000/api</code></td></tr><tr><td>Production</td><td><code>https://your-domain.com/api</code></td></tr></tbody></table><h2 id="authentication" tabindex="-1">Authentication <a class="header-anchor" href="#authentication" aria-label="Permalink to &quot;Authentication&quot;">​</a></h2><p>Three authentication methods are supported. Use the one that fits your use case.</p><h3 id="_1-httponly-cookies-browser-sessions" tabindex="-1">1. httpOnly Cookies (browser sessions) <a class="header-anchor" href="#_1-httponly-cookies-browser-sessions" aria-label="Permalink to &quot;1. httpOnly Cookies (browser sessions)&quot;">​</a></h3><p>This is the primary authentication method used by the OpenBin web app. On a successful login or registration, the server sets two httpOnly cookies:</p><ul><li><code>openbin-access</code> — short-lived JWT access token (15-minute expiry)</li><li><code>openbin-refresh</code> — long-lived refresh token (7-day expiry)</li></ul><p>Browsers automatically include these cookies on every same-origin request. Cross-origin requests must include <code>credentials: &#39;include&#39;</code>. The refresh token is rotated automatically via <code>POST /api/auth/refresh</code>. If a revoked refresh token is replayed, the entire token family is invalidated as a security measure.</p><h3 id="_2-bearer-token-jwt" tabindex="-1">2. Bearer Token (JWT) <a class="header-anchor" href="#_2-bearer-token-jwt" aria-label="Permalink to &quot;2. Bearer Token (JWT)&quot;">​</a></h3><p>The JWT token returned in the <code>token</code> field of the login and register response body can be used directly as a Bearer token:</p><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Authorization</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Bearer &lt;jwt-token&gt;</span></span></code></pre></div><p>This method is provided for backward compatibility and for clients that cannot use cookies.</p><h3 id="_3-api-key" tabindex="-1">3. API Key <a class="header-anchor" href="#_3-api-key" aria-label="Permalink to &quot;3. API Key&quot;">​</a></h3><p>Long-lived API keys (format: <code>sk_openbin_&lt;64 hex chars&gt;</code>) can be created via <code>POST /api/api-keys</code> and used in the same Authorization header format:</p><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Authorization</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Bearer sk_openbin_...</span></span></code></pre></div><p>API keys are intended for automation, scripts, and integrations such as smart home systems. They never expire unless explicitly revoked. See the <a href="/openbin/guide/api-keys.html">API Keys guide</a> for details on creating and managing keys.</p><h2 id="response-envelopes" tabindex="-1">Response Envelopes <a class="header-anchor" href="#response-envelopes" aria-label="Permalink to &quot;Response Envelopes&quot;">​</a></h2><h3 id="list-responses" tabindex="-1">List responses <a class="header-anchor" href="#list-responses" aria-label="Permalink to &quot;List responses&quot;">​</a></h3><p>All list endpoints return a consistent envelope:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;results&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">42</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>When pagination is used (i.e., a <code>limit</code> query parameter is provided), <code>count</code> reflects the <strong>total number of matching rows</strong> across all pages. Without pagination, <code>count</code> equals <code>results.length</code>.</p><h3 id="error-responses" tabindex="-1">Error responses <a class="header-anchor" href="#error-responses" aria-label="Permalink to &quot;Error responses&quot;">​</a></h3><p>All errors use a consistent envelope with a machine-readable code and a human-readable message:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;NOT_FOUND&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Bin not found&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><table tabindex="0"><thead><tr><th>Error Code</th><th>HTTP Status</th><th>Description</th></tr></thead><tbody><tr><td><code>VALIDATION_ERROR</code></td><td>422</td><td>Request body or parameters failed validation</td></tr><tr><td><code>NOT_FOUND</code></td><td>404</td><td>The requested resource does not exist</td></tr><tr><td><code>FORBIDDEN</code></td><td>401 / 403</td><td>Authentication required or insufficient permissions</td></tr><tr><td><code>CONFLICT</code></td><td>409</td><td>Resource already exists (e.g. duplicate username)</td></tr><tr><td><code>RATE_LIMITED</code></td><td>429</td><td>Too many requests — back off and retry</td></tr><tr><td><code>INTERNAL_ERROR</code></td><td>500</td><td>Unexpected server error</td></tr></tbody></table><h2 id="rate-limiting" tabindex="-1">Rate Limiting <a class="header-anchor" href="#rate-limiting" aria-label="Permalink to &quot;Rate Limiting&quot;">​</a></h2><p>Rate limiting is applied to sensitive endpoints to prevent abuse:</p><ul><li><strong>Registration</strong> (<code>POST /auth/register</code>): 3 attempts per hour</li><li><strong>Login</strong> (<code>POST /auth/login</code>): 5 attempts per 15 minutes</li><li><strong>Token refresh</strong> (<code>POST /auth/refresh</code>): limited per IP</li><li><strong>Join location</strong> (<code>POST /locations/join</code>): 10 per 15 minutes</li><li><strong>AI endpoints</strong>: 30 per hour for JWT auth; higher limits for API keys</li><li><strong>Batch operations</strong>: 60 per hour for JWT; 600 per hour for API keys</li></ul><div class="tip custom-block"><p class="custom-block-title">Development</p><p>Set the <code>DISABLE_RATE_LIMIT=true</code> environment variable to disable all rate limiters during local development and testing.</p></div><h2 id="api-groups" tabindex="-1">API Groups <a class="header-anchor" href="#api-groups" aria-label="Permalink to &quot;API Groups&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Tag</th><th>Description</th></tr></thead><tbody><tr><td><strong>Auth</strong></td><td>Registration, login, logout, profile management, avatar, token refresh, account deletion</td></tr><tr><td><strong>Locations</strong></td><td>Location CRUD, membership management, and invite codes</td></tr><tr><td><strong>Areas</strong></td><td>Named zones within a location for organizing bins</td></tr><tr><td><strong>Bins</strong></td><td>Bin CRUD, soft deletes, restore, QR lookup, items, tags, pinning, and photo upload</td></tr><tr><td><strong>Photos</strong></td><td>Photo retrieval (file and thumbnail) and deletion</td></tr><tr><td><strong>TagColors</strong></td><td>Per-location color assignments for tags</td></tr><tr><td><strong>PrintSettings</strong></td><td>Per-user label format and custom print dimension settings</td></tr><tr><td><strong>Export</strong></td><td>Export location data as JSON, ZIP, or CSV; import V1/V2 format data</td></tr><tr><td><strong>AI</strong></td><td>AI provider configuration, photo analysis, natural language commands, and inventory queries</td></tr><tr><td><strong>Activity</strong></td><td>Paginated location activity log</td></tr><tr><td><strong>ApiKeys</strong></td><td>API key creation, listing, and revocation for headless access</td></tr><tr><td><strong>UserPreferences</strong></td><td>Arbitrary per-user application preference storage</td></tr><tr><td><strong>SavedViews</strong></td><td>Per-user saved bin list filter and sort views</td></tr><tr><td><strong>ScanHistory</strong></td><td>Per-user QR code scan history</td></tr><tr><td><strong>Batch</strong></td><td>Execute up to 50 bin operations atomically in a single request</td></tr></tbody></table>`,33)])])}const g=e(o,[["render",r]]);export{u as __pageData,g as default};
