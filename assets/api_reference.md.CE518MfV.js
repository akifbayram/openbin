import{_ as t,o as i,c as a,ag as e}from"./chunks/framework.BRz7bqS8.js";const c=JSON.parse('{"title":"API Reference","description":"","frontmatter":{"title":"API Reference"},"headers":[],"relativePath":"api/reference.md","filePath":"api/reference.md"}'),n={name:"api/reference.md"};function o(d,s,h,p,l,r){return i(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="api-reference" tabindex="-1">API Reference <a class="header-anchor" href="#api-reference" aria-label="Permalink to &quot;API Reference&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">Full Spec</p><p>For the complete OpenAPI 3.0 specification including all schemas and examples, see <a href="https://github.com/akifbayram/openbin/blob/main/server/openapi.yaml" target="_blank" rel="noreferrer"><code>server/openapi.yaml</code></a> or run the app and visit <code>/api-docs/</code> (requires nginx proxy configuration).</p></div><h2 id="auth" tabindex="-1">Auth <a class="header-anchor" href="#auth" aria-label="Permalink to &quot;Auth&quot;">​</a></h2><p>Registration, login, profile management, avatar upload, token refresh, and account deletion.</p><hr><h3 id="get-api-auth-status" tabindex="-1">GET /api/auth/status <a class="header-anchor" href="#get-api-auth-status" aria-label="Permalink to &quot;GET /api/auth/status&quot;">​</a></h3><p>Returns server configuration flags relevant to the auth UI. No authentication required.</p><p><strong>Response</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;registrationEnabled&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="post-api-auth-register" tabindex="-1">POST /api/auth/register <a class="header-anchor" href="#post-api-auth-register" aria-label="Permalink to &quot;POST /api/auth/register&quot;">​</a></h3><p>Creates a new user account. Rate limited to 3 per hour. Returns 403 if registration is disabled via the <code>REGISTRATION_ENABLED</code> environment variable.</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>username</code></td><td>string</td><td>Yes</td><td>3–50 characters</td></tr><tr><td><code>password</code></td><td>string</td><td>Yes</td><td>Min 8 characters; must contain uppercase, lowercase, and a digit</td></tr><tr><td><code>displayName</code></td><td>string</td><td>Yes</td><td>1–100 characters</td></tr></tbody></table><p><strong>Response (201)</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&lt;jwt&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;username&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;alice&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;displayName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Alice&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;activeLocationId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Sets <code>openbin-access</code> and <code>openbin-refresh</code> httpOnly cookies.</p><hr><h3 id="post-api-auth-login" tabindex="-1">POST /api/auth/login <a class="header-anchor" href="#post-api-auth-login" aria-label="Permalink to &quot;POST /api/auth/login&quot;">​</a></h3><p>Authenticates with username and password. Rate limited to 5 per 15 minutes.</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>username</code></td><td>string</td><td>Yes</td><td></td></tr><tr><td><code>password</code></td><td>string</td><td>Yes</td><td></td></tr></tbody></table><p><strong>Response (200)</strong></p><p>Same shape as the register response: <code>{ token, user, activeLocationId }</code>. Sets auth cookies.</p><hr><h3 id="post-api-auth-refresh" tabindex="-1">POST /api/auth/refresh <a class="header-anchor" href="#post-api-auth-refresh" aria-label="Permalink to &quot;POST /api/auth/refresh&quot;">​</a></h3><p>Rotates the refresh token. Reads the <code>openbin-refresh</code> httpOnly cookie, validates and revokes the old token, and issues a new access + refresh token pair as cookies. No Authorization header required (the access token may be expired).</p><div class="warning custom-block"><p class="custom-block-title">Replay protection</p><p>If a previously-revoked refresh token is presented, the entire token family is revoked and all sessions for the user are terminated.</p></div><p><strong>Response (200)</strong>: <code>{ &quot;message&quot;: &quot;Token refreshed&quot; }</code> with new cookies set.</p><hr><h3 id="post-api-auth-logout" tabindex="-1">POST /api/auth/logout <a class="header-anchor" href="#post-api-auth-logout" aria-label="Permalink to &quot;POST /api/auth/logout&quot;">​</a></h3><p>Revokes the current refresh token from the <code>openbin-refresh</code> cookie and clears auth cookies. No authentication required.</p><p><strong>Response (200)</strong>: <code>{ &quot;message&quot;: &quot;Logged out&quot; }</code></p><hr><h3 id="post-api-auth-logout-all" tabindex="-1">POST /api/auth/logout-all <a class="header-anchor" href="#post-api-auth-logout-all" aria-label="Permalink to &quot;POST /api/auth/logout-all&quot;">​</a></h3><p>Revokes all refresh tokens for the authenticated user, logging out every device simultaneously.</p><p><strong>Response (200)</strong>: <code>{ &quot;message&quot;: &quot;All sessions logged out&quot; }</code></p><hr><h3 id="get-api-auth-me" tabindex="-1">GET /api/auth/me <a class="header-anchor" href="#get-api-auth-me" aria-label="Permalink to &quot;GET /api/auth/me&quot;">​</a></h3><p>Returns the authenticated user&#39;s profile plus the persisted active location selection.</p><p><strong>Response (200)</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;username&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;alice&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;displayName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Alice&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;avatarUrl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;activeLocationId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid-or-null&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;createdAt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2024-01-01T00:00:00Z&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;updatedAt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2024-01-01T00:00:00Z&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="put-api-auth-active-location" tabindex="-1">PUT /api/auth/active-location <a class="header-anchor" href="#put-api-auth-active-location" aria-label="Permalink to &quot;PUT /api/auth/active-location&quot;">​</a></h3><p>Persists the user&#39;s active location selection. The location is validated for membership.</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>locationId</code></td><td>string (UUID) or null</td><td>Yes</td><td>Location to set as active, or null to clear</td></tr></tbody></table><p><strong>Response (200)</strong>: <code>{ &quot;activeLocationId&quot;: &quot;uuid-or-null&quot; }</code></p><hr><h3 id="put-api-auth-profile" tabindex="-1">PUT /api/auth/profile <a class="header-anchor" href="#put-api-auth-profile" aria-label="Permalink to &quot;PUT /api/auth/profile&quot;">​</a></h3><p>Updates the authenticated user&#39;s display name and/or email.</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>displayName</code></td><td>string</td><td>No</td><td>Max 100 characters</td></tr><tr><td><code>email</code></td><td>string (email)</td><td>No</td><td></td></tr></tbody></table><p><strong>Response (200)</strong>: Updated <code>User</code> object.</p><hr><h3 id="put-api-auth-password" tabindex="-1">PUT /api/auth/password <a class="header-anchor" href="#put-api-auth-password" aria-label="Permalink to &quot;PUT /api/auth/password&quot;">​</a></h3><p>Changes the authenticated user&#39;s password.</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>currentPassword</code></td><td>string</td><td>Yes</td><td></td></tr><tr><td><code>newPassword</code></td><td>string</td><td>Yes</td><td>Min 8 characters; must contain uppercase, lowercase, and a digit</td></tr></tbody></table><p><strong>Response (200)</strong>: <code>{ &quot;message&quot;: &quot;Password updated&quot; }</code></p><hr><h3 id="post-api-auth-avatar" tabindex="-1">POST /api/auth/avatar <a class="header-anchor" href="#post-api-auth-avatar" aria-label="Permalink to &quot;POST /api/auth/avatar&quot;">​</a></h3><p>Uploads an avatar image. Accepts JPEG, PNG, or WebP up to 2MB. Uses <code>multipart/form-data</code> with a <code>avatar</code> file field.</p><p><strong>Response (200)</strong>: <code>{ &quot;avatarUrl&quot;: &quot;/api/auth/avatar/&lt;userId&gt;&quot; }</code></p><hr><h3 id="delete-api-auth-avatar" tabindex="-1">DELETE /api/auth/avatar <a class="header-anchor" href="#delete-api-auth-avatar" aria-label="Permalink to &quot;DELETE /api/auth/avatar&quot;">​</a></h3><p>Removes the authenticated user&#39;s avatar.</p><p><strong>Response (200)</strong>: <code>{ &quot;message&quot;: &quot;Avatar removed&quot; }</code></p><hr><h3 id="get-api-auth-avatar-userid" tabindex="-1">GET /api/auth/avatar/<code>{userId}</code> <a class="header-anchor" href="#get-api-auth-avatar-userid" aria-label="Permalink to &quot;GET /api/auth/avatar/\`{userId}\`&quot;">​</a></h3><p>Serves an avatar image file. Returns the binary image with appropriate content-type.</p><p><strong>Path parameters</strong></p><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>userId</code></td><td>UUID</td><td></td></tr></tbody></table><p><strong>Response (200)</strong>: Binary image (<code>image/*</code>).</p><hr><h3 id="delete-api-auth-account" tabindex="-1">DELETE /api/auth/account <a class="header-anchor" href="#delete-api-auth-account" aria-label="Permalink to &quot;DELETE /api/auth/account&quot;">​</a></h3><p>Permanently deletes the authenticated user&#39;s account. Requires password confirmation. Cascades to sole-owned locations (and their bins, photos, tag colors). Shared locations are preserved.</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>password</code></td><td>string</td><td>Yes</td><td>Current password for confirmation</td></tr></tbody></table><p><strong>Response (200)</strong>: <code>{ &quot;message&quot;: &quot;Account deleted&quot; }</code></p><hr><h2 id="locations" tabindex="-1">Locations <a class="header-anchor" href="#locations" aria-label="Permalink to &quot;Locations&quot;">​</a></h2><p>Location CRUD, membership management, and invite codes.</p><hr><h3 id="get-api-locations" tabindex="-1">GET /api/locations <a class="header-anchor" href="#get-api-locations" aria-label="Permalink to &quot;GET /api/locations&quot;">​</a></h3><p>Returns all locations the authenticated user belongs to, including member count, bin count, area count, and the user&#39;s role.</p><p><strong>Response (200)</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;results&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;My Workshop&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;invite_code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;abc123&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;admin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;member_count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;bin_count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">42</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;area_count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;activity_retention_days&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">90</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;trash_retention_days&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;app_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OpenBin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;created_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;updated_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="post-api-locations" tabindex="-1">POST /api/locations <a class="header-anchor" href="#post-api-locations" aria-label="Permalink to &quot;POST /api/locations&quot;">​</a></h3><p>Creates a new location and adds the authenticated user as owner (admin).</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td>string</td><td>Yes</td><td>Max 255 characters</td></tr></tbody></table><p><strong>Response (201)</strong>: The created <code>Location</code> object.</p><hr><h3 id="post-api-locations-join" tabindex="-1">POST /api/locations/join <a class="header-anchor" href="#post-api-locations-join" aria-label="Permalink to &quot;POST /api/locations/join&quot;">​</a></h3><p>Joins a location using an invite code. Rate limited to 10 per 15 minutes.</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>inviteCode</code></td><td>string</td><td>Yes</td><td>Invite code for the target location</td></tr></tbody></table><p><strong>Response (200)</strong>: The joined <code>Location</code> object.</p><hr><h3 id="put-api-locations-id" tabindex="-1">PUT /api/locations/<code>{id}</code> <a class="header-anchor" href="#put-api-locations-id" aria-label="Permalink to &quot;PUT /api/locations/\`{id}\`&quot;">​</a></h3><p>Updates a location&#39;s settings. Admin only.</p><p><strong>Path parameters</strong>: <code>id</code> (UUID)</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td>string</td><td>Max 255 characters</td></tr><tr><td><code>activity_retention_days</code></td><td>integer (7–365)</td><td>Days to keep activity log entries</td></tr><tr><td><code>trash_retention_days</code></td><td>integer (7–365)</td><td>Days to keep soft-deleted bins before purging</td></tr><tr><td><code>app_name</code></td><td>string</td><td>Custom display name for this location</td></tr></tbody></table><p><strong>Response (200)</strong>: Updated <code>Location</code> object.</p><hr><h3 id="delete-api-locations-id" tabindex="-1">DELETE /api/locations/<code>{id}</code> <a class="header-anchor" href="#delete-api-locations-id" aria-label="Permalink to &quot;DELETE /api/locations/\`{id}\`&quot;">​</a></h3><p>Permanently deletes a location and all its data (bins, photos, areas, tag colors, activity log). Admin only.</p><p><strong>Path parameters</strong>: <code>id</code> (UUID)</p><p><strong>Response (200)</strong>: <code>{ &quot;message&quot;: &quot;Location deleted&quot; }</code></p><hr><h3 id="get-api-locations-id-members" tabindex="-1">GET /api/locations/<code>{id}</code>/members <a class="header-anchor" href="#get-api-locations-id-members" aria-label="Permalink to &quot;GET /api/locations/\`{id}\`/members&quot;">​</a></h3><p>Lists all members of a location.</p><p><strong>Path parameters</strong>: <code>id</code> (UUID)</p><p><strong>Response (200)</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;results&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;location_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;user_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;admin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;joined_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;display_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Alice&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="delete-api-locations-id-members-userid" tabindex="-1">DELETE /api/locations/<code>{id}</code>/members/<code>{userId}</code> <a class="header-anchor" href="#delete-api-locations-id-members-userid" aria-label="Permalink to &quot;DELETE /api/locations/\`{id}\`/members/\`{userId}\`&quot;">​</a></h3><p>Removes a member from a location. Admins can remove any member. Regular members can only remove themselves (leave). The last admin cannot leave.</p><p><strong>Path parameters</strong>: <code>id</code> (location UUID), <code>userId</code> (user UUID)</p><p><strong>Response (200)</strong>: <code>{ &quot;message&quot;: &quot;Member removed&quot; }</code></p><hr><h3 id="put-api-locations-id-members-userid-role" tabindex="-1">PUT /api/locations/<code>{id}</code>/members/<code>{userId}</code>/role <a class="header-anchor" href="#put-api-locations-id-members-userid-role" aria-label="Permalink to &quot;PUT /api/locations/\`{id}\`/members/\`{userId}\`/role&quot;">​</a></h3><p>Changes a member&#39;s role. Admin only. Cannot demote the last admin.</p><p><strong>Path parameters</strong>: <code>id</code> (location UUID), <code>userId</code> (user UUID)</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>role</code></td><td><code>&quot;admin&quot;</code> or <code>&quot;member&quot;</code></td><td>Yes</td><td></td></tr></tbody></table><p><strong>Response (200)</strong>: <code>{ &quot;message&quot;: &quot;Role updated to admin&quot; }</code></p><hr><h3 id="post-api-locations-id-regenerate-invite" tabindex="-1">POST /api/locations/<code>{id}</code>/regenerate-invite <a class="header-anchor" href="#post-api-locations-id-regenerate-invite" aria-label="Permalink to &quot;POST /api/locations/\`{id}\`/regenerate-invite&quot;">​</a></h3><p>Generates a new invite code for the location. Admin only. Invalidates the previous code immediately.</p><p><strong>Path parameters</strong>: <code>id</code> (UUID)</p><p><strong>Response (200)</strong>: <code>{ &quot;invite_code&quot;: &quot;xyz789&quot; }</code></p><hr><h2 id="areas" tabindex="-1">Areas <a class="header-anchor" href="#areas" aria-label="Permalink to &quot;Areas&quot;">​</a></h2><p>Named zones within a location for organizing bins.</p><hr><h3 id="get-api-locations-locationid-areas" tabindex="-1">GET /api/locations/<code>{locationId}</code>/areas <a class="header-anchor" href="#get-api-locations-locationid-areas" aria-label="Permalink to &quot;GET /api/locations/\`{locationId}\`/areas&quot;">​</a></h3><p>Lists all areas in a location, including an <code>unassigned_count</code> of bins with no area.</p><p><strong>Path parameters</strong>: <code>locationId</code> (UUID)</p><p><strong>Response (200)</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;results&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;location_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Garage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;bin_count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;created_by&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;created_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;updated_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;unassigned_count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="post-api-locations-locationid-areas" tabindex="-1">POST /api/locations/<code>{locationId}</code>/areas <a class="header-anchor" href="#post-api-locations-locationid-areas" aria-label="Permalink to &quot;POST /api/locations/\`{locationId}\`/areas&quot;">​</a></h3><p>Creates a new area within a location.</p><p><strong>Path parameters</strong>: <code>locationId</code> (UUID)</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td>string</td><td>Yes</td><td>Max 255 characters</td></tr></tbody></table><p><strong>Response (201)</strong>: The created <code>Area</code> object.</p><hr><h3 id="put-api-locations-locationid-areas-areaid" tabindex="-1">PUT /api/locations/<code>{locationId}</code>/areas/<code>{areaId}</code> <a class="header-anchor" href="#put-api-locations-locationid-areas-areaid" aria-label="Permalink to &quot;PUT /api/locations/\`{locationId}\`/areas/\`{areaId}\`&quot;">​</a></h3><p>Renames an existing area.</p><p><strong>Path parameters</strong>: <code>locationId</code> (UUID), <code>areaId</code> (UUID)</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td>string</td><td>Yes</td><td>Max 255 characters</td></tr></tbody></table><p><strong>Response (200)</strong>: The updated <code>Area</code> object.</p><hr><h3 id="delete-api-locations-locationid-areas-areaid" tabindex="-1">DELETE /api/locations/<code>{locationId}</code>/areas/<code>{areaId}</code> <a class="header-anchor" href="#delete-api-locations-locationid-areas-areaid" aria-label="Permalink to &quot;DELETE /api/locations/\`{locationId}\`/areas/\`{areaId}\`&quot;">​</a></h3><p>Deletes an area. Bins in the area become unassigned (<code>area_id = NULL</code>); they are not deleted.</p><p><strong>Path parameters</strong>: <code>locationId</code> (UUID), <code>areaId</code> (UUID)</p><p><strong>Response (200)</strong>: <code>{ &quot;message&quot;: &quot;Area deleted&quot; }</code></p><hr><h2 id="bins" tabindex="-1">Bins <a class="header-anchor" href="#bins" aria-label="Permalink to &quot;Bins&quot;">​</a></h2><p>Bin CRUD, soft delete, restore, permanent deletion, QR lookup, items, tags, pinning, and photo upload.</p><hr><h3 id="post-api-bins" tabindex="-1">POST /api/bins <a class="header-anchor" href="#post-api-bins" aria-label="Permalink to &quot;POST /api/bins&quot;">​</a></h3><p>Creates a new bin. The bin ID is an auto-generated 6-character alphanumeric short code (charset excludes ambiguous characters: <code>0</code>, <code>O</code>, <code>1</code>, <code>l</code>, <code>I</code>).</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td>string</td><td>Yes</td><td>Max 255 characters</td></tr><tr><td><code>locationId</code></td><td>UUID</td><td>Yes</td><td>Location to create the bin in</td></tr><tr><td><code>items</code></td><td>string[]</td><td>No</td><td>Up to 500 initial items</td></tr><tr><td><code>notes</code></td><td>string</td><td>No</td><td>Max 10,000 characters</td></tr><tr><td><code>tags</code></td><td>string[]</td><td>No</td><td>Up to 50 tags</td></tr><tr><td><code>areaId</code></td><td>UUID</td><td>No</td><td>Area to assign the bin to</td></tr><tr><td><code>icon</code></td><td>string</td><td>No</td><td>PascalCase Lucide icon name</td></tr><tr><td><code>color</code></td><td>string</td><td>No</td><td>Color preset key</td></tr><tr><td><code>cardStyle</code></td><td>string</td><td>No</td><td>JSON-encoded card style configuration</td></tr><tr><td><code>visibility</code></td><td><code>&quot;location&quot;</code> or <code>&quot;private&quot;</code></td><td>No</td><td>Defaults to <code>&quot;location&quot;</code></td></tr></tbody></table><p><strong>Response (201)</strong>: The created <code>Bin</code> object.</p><hr><h3 id="get-api-bins" tabindex="-1">GET /api/bins <a class="header-anchor" href="#get-api-bins" aria-label="Permalink to &quot;GET /api/bins&quot;">​</a></h3><p>Lists non-deleted bins for a location. Supports search, filtering, sorting, and pagination.</p><p><strong>Query parameters</strong></p><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>location_id</code></td><td>UUID</td><td>Yes</td><td>Location to query</td></tr><tr><td><code>q</code></td><td>string</td><td>No</td><td>Full-text search across name, items, notes, tags, ID, and area name</td></tr><tr><td><code>tag</code></td><td>string</td><td>No</td><td>Filter by a single exact tag</td></tr><tr><td><code>tags</code></td><td>string</td><td>No</td><td>Comma-separated tag names; combined with <code>tag_mode</code></td></tr><tr><td><code>tag_mode</code></td><td><code>&quot;any&quot;</code> or <code>&quot;all&quot;</code></td><td>No</td><td>Whether bins must match any or all of the specified tags. Default: <code>&quot;any&quot;</code></td></tr><tr><td><code>area_id</code></td><td>string</td><td>No</td><td>Filter by area UUID. Use <code>__unassigned__</code> for bins with no area. Superseded by <code>areas</code>.</td></tr><tr><td><code>areas</code></td><td>string</td><td>No</td><td>Comma-separated area UUIDs. Supports <code>__unassigned__</code>. Takes precedence over <code>area_id</code>.</td></tr><tr><td><code>colors</code></td><td>string</td><td>No</td><td>Comma-separated color keys to filter by</td></tr><tr><td><code>has_items</code></td><td><code>&quot;true&quot;</code></td><td>No</td><td>Only return bins that have at least one item</td></tr><tr><td><code>has_notes</code></td><td><code>&quot;true&quot;</code></td><td>No</td><td>Only return bins with non-empty notes</td></tr><tr><td><code>needs_organizing</code></td><td><code>&quot;true&quot;</code></td><td>No</td><td>Return bins that are missing tags, area assignment, and items</td></tr><tr><td><code>sort</code></td><td><code>&quot;name&quot;</code>, <code>&quot;created_at&quot;</code>, <code>&quot;updated_at&quot;</code>, <code>&quot;area&quot;</code></td><td>No</td><td>Default: <code>&quot;updated_at&quot;</code></td></tr><tr><td><code>sort_dir</code></td><td><code>&quot;asc&quot;</code> or <code>&quot;desc&quot;</code></td><td>No</td><td>Default: <code>&quot;desc&quot;</code></td></tr><tr><td><code>limit</code></td><td>integer (1–100)</td><td>No</td><td>Page size. When provided, <code>count</code> returns total matching rows.</td></tr><tr><td><code>offset</code></td><td>integer</td><td>No</td><td>Rows to skip (used with <code>limit</code>). Default: <code>0</code></td></tr></tbody></table><p><strong>Response (200)</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;results&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [ </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* Bin objects */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">150</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="get-api-bins-trash" tabindex="-1">GET /api/bins/trash <a class="header-anchor" href="#get-api-bins-trash" aria-label="Permalink to &quot;GET /api/bins/trash&quot;">​</a></h3><p>Returns soft-deleted bins (those with a non-null <code>deleted_at</code>). Bins are auto-purged after the location&#39;s configured <code>trash_retention_days</code> (default 30).</p><p><strong>Query parameters</strong></p><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>location_id</code></td><td>UUID</td><td>Yes</td><td></td></tr></tbody></table><p><strong>Response (200)</strong>: <code>{ results: Bin[], count: number }</code></p><hr><h3 id="get-api-bins-lookup-shortcode" tabindex="-1">GET /api/bins/lookup/<code>{shortCode}</code> <a class="header-anchor" href="#get-api-bins-lookup-shortcode" aria-label="Permalink to &quot;GET /api/bins/lookup/\`{shortCode}\`&quot;">​</a></h3><p>Looks up a bin by its 6-character short code ID. This is a legacy alias for <code>GET /api/bins/{id}</code> — since bin IDs are now short codes, the two endpoints are equivalent.</p><p><strong>Path parameters</strong>: <code>shortCode</code> (6 characters)</p><p><strong>Response (200)</strong>: <code>Bin</code> object.</p><hr><h3 id="get-api-bins-pinned" tabindex="-1">GET /api/bins/pinned <a class="header-anchor" href="#get-api-bins-pinned" aria-label="Permalink to &quot;GET /api/bins/pinned&quot;">​</a></h3><p>Returns the authenticated user&#39;s pinned bins in the specified location, ordered by pin position.</p><p><strong>Query parameters</strong></p><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>location_id</code></td><td>UUID</td><td>Yes</td><td></td></tr></tbody></table><p><strong>Response (200)</strong>: <code>{ results: Bin[], count: number }</code></p><hr><h3 id="put-api-bins-pinned-reorder" tabindex="-1">PUT /api/bins/pinned/reorder <a class="header-anchor" href="#put-api-bins-pinned-reorder" aria-label="Permalink to &quot;PUT /api/bins/pinned/reorder&quot;">​</a></h3><p>Reorders the authenticated user&#39;s pinned bins.</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>bin_ids</code></td><td>UUID[]</td><td>Yes</td><td>Bin IDs in the desired pin order</td></tr></tbody></table><p><strong>Response (200)</strong>: <code>{ &quot;success&quot;: true }</code></p><hr><h3 id="get-api-bins-id" tabindex="-1">GET /api/bins/<code>{id}</code> <a class="header-anchor" href="#get-api-bins-id" aria-label="Permalink to &quot;GET /api/bins/\`{id}\`&quot;">​</a></h3><p>Fetches a single bin by ID.</p><p><strong>Path parameters</strong>: <code>id</code> (bin ID / short code)</p><p><strong>Response (200)</strong>: <code>Bin</code> object.</p><hr><h3 id="put-api-bins-id" tabindex="-1">PUT /api/bins/<code>{id}</code> <a class="header-anchor" href="#put-api-bins-id" aria-label="Permalink to &quot;PUT /api/bins/\`{id}\`&quot;">​</a></h3><p>Updates a bin. All fields are optional; only provided fields are changed.</p><p><strong>Path parameters</strong>: <code>id</code> (bin ID)</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td>string</td><td>Max 255 characters</td></tr><tr><td><code>areaId</code></td><td>UUID or null</td><td>Area assignment; null to unassign</td></tr><tr><td><code>items</code></td><td>string[]</td><td>Replaces all existing items (up to 500)</td></tr><tr><td><code>notes</code></td><td>string</td><td>Max 10,000 characters</td></tr><tr><td><code>tags</code></td><td>string[]</td><td>Replaces all existing tags (up to 50)</td></tr><tr><td><code>icon</code></td><td>string</td><td>PascalCase Lucide icon name</td></tr><tr><td><code>color</code></td><td>string</td><td>Color preset key</td></tr><tr><td><code>cardStyle</code></td><td>string</td><td>JSON-encoded card style configuration (max 500 characters)</td></tr><tr><td><code>visibility</code></td><td><code>&quot;location&quot;</code> or <code>&quot;private&quot;</code></td><td></td></tr></tbody></table><p><strong>Response (200)</strong>: Updated <code>Bin</code> object.</p><hr><h3 id="delete-api-bins-id" tabindex="-1">DELETE /api/bins/<code>{id}</code> <a class="header-anchor" href="#delete-api-bins-id" aria-label="Permalink to &quot;DELETE /api/bins/\`{id}\`&quot;">​</a></h3><p>Soft-deletes a bin by setting <code>deleted_at</code>. The bin moves to trash and can be restored.</p><p><strong>Path parameters</strong>: <code>id</code> (bin ID)</p><p><strong>Response (200)</strong>: <code>{ &quot;message&quot;: &quot;Bin deleted&quot; }</code></p><hr><h3 id="post-api-bins-id-pin" tabindex="-1">POST /api/bins/<code>{id}</code>/pin <a class="header-anchor" href="#post-api-bins-id-pin" aria-label="Permalink to &quot;POST /api/bins/\`{id}\`/pin&quot;">​</a></h3><p>Pins a bin for the authenticated user. Idempotent. Maximum 20 pins per user per location.</p><p><strong>Path parameters</strong>: <code>id</code> (bin ID)</p><p><strong>Response (200)</strong>: <code>{ &quot;pinned&quot;: true }</code></p><hr><h3 id="delete-api-bins-id-pin" tabindex="-1">DELETE /api/bins/<code>{id}</code>/pin <a class="header-anchor" href="#delete-api-bins-id-pin" aria-label="Permalink to &quot;DELETE /api/bins/\`{id}\`/pin&quot;">​</a></h3><p>Unpins a bin for the authenticated user.</p><p><strong>Path parameters</strong>: <code>id</code> (bin ID)</p><p><strong>Response (200)</strong>: <code>{ &quot;pinned&quot;: false }</code></p><hr><h3 id="post-api-bins-id-restore" tabindex="-1">POST /api/bins/<code>{id}</code>/restore <a class="header-anchor" href="#post-api-bins-id-restore" aria-label="Permalink to &quot;POST /api/bins/\`{id}\`/restore&quot;">​</a></h3><p>Restores a soft-deleted bin from trash.</p><p><strong>Path parameters</strong>: <code>id</code> (bin ID)</p><p><strong>Response (200)</strong>: The restored <code>Bin</code> object.</p><hr><h3 id="post-api-bins-id-move" tabindex="-1">POST /api/bins/<code>{id}</code>/move <a class="header-anchor" href="#post-api-bins-id-move" aria-label="Permalink to &quot;POST /api/bins/\`{id}\`/move&quot;">​</a></h3><p>Moves a bin to a different location. The user must be a member of both locations. The area assignment is cleared because areas are location-scoped.</p><p><strong>Path parameters</strong>: <code>id</code> (bin ID)</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>locationId</code></td><td>UUID</td><td>Yes</td><td>Target location ID</td></tr></tbody></table><p><strong>Response (200)</strong>: Updated <code>Bin</code> object in the new location.</p><hr><h3 id="delete-api-bins-id-permanent" tabindex="-1">DELETE /api/bins/<code>{id}</code>/permanent <a class="header-anchor" href="#delete-api-bins-id-permanent" aria-label="Permalink to &quot;DELETE /api/bins/\`{id}\`/permanent&quot;">​</a></h3><p>Permanently deletes a bin and removes its photos from storage. Only works on bins that are already soft-deleted (in trash).</p><p><strong>Path parameters</strong>: <code>id</code> (bin ID)</p><p><strong>Response (200)</strong>: <code>{ &quot;message&quot;: &quot;Bin permanently deleted&quot; }</code></p><hr><h3 id="post-api-bins-id-photos" tabindex="-1">POST /api/bins/<code>{id}</code>/photos <a class="header-anchor" href="#post-api-bins-id-photos" aria-label="Permalink to &quot;POST /api/bins/\`{id}\`/photos&quot;">​</a></h3><p>Uploads a photo to a bin. Accepts JPEG, PNG, or WebP up to 5MB. Uses <code>multipart/form-data</code> with a <code>photo</code> file field.</p><p><strong>Path parameters</strong>: <code>id</code> (bin ID)</p><p><strong>Response (201)</strong>: The created <code>Photo</code> object.</p><hr><h3 id="put-api-bins-id-add-tags" tabindex="-1">PUT /api/bins/<code>{id}</code>/add-tags <a class="header-anchor" href="#put-api-bins-id-add-tags" aria-label="Permalink to &quot;PUT /api/bins/\`{id}\`/add-tags&quot;">​</a></h3><p>Adds tags to a bin. Merges new tags with existing ones — does not replace.</p><p><strong>Path parameters</strong>: <code>id</code> (bin ID)</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>tags</code></td><td>string[]</td><td>Yes</td><td>Up to 50 tags to add</td></tr></tbody></table><p><strong>Response (200)</strong>: Updated <code>Bin</code> object.</p><hr><h3 id="post-api-bins-id-items" tabindex="-1">POST /api/bins/<code>{id}</code>/items <a class="header-anchor" href="#post-api-bins-id-items" aria-label="Permalink to &quot;POST /api/bins/\`{id}\`/items&quot;">​</a></h3><p>Appends items to a bin&#39;s item list.</p><p><strong>Path parameters</strong>: <code>id</code> (bin ID)</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>items</code></td><td>string[]</td><td>Yes</td><td>Item names to add</td></tr></tbody></table><p><strong>Response (201)</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;items&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Phillips screwdriver&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="put-api-bins-id-items-itemid" tabindex="-1">PUT /api/bins/<code>{id}</code>/items/<code>{itemId}</code> <a class="header-anchor" href="#put-api-bins-id-items-itemid" aria-label="Permalink to &quot;PUT /api/bins/\`{id}\`/items/\`{itemId}\`&quot;">​</a></h3><p>Renames a single item within a bin.</p><p><strong>Path parameters</strong>: <code>id</code> (bin ID), <code>itemId</code> (item UUID)</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td>string</td><td>Yes</td><td>New item name</td></tr></tbody></table><p><strong>Response (200)</strong>: Updated <code>BinItem</code> object <code>{ id, name }</code>.</p><hr><h3 id="delete-api-bins-id-items-itemid" tabindex="-1">DELETE /api/bins/<code>{id}</code>/items/<code>{itemId}</code> <a class="header-anchor" href="#delete-api-bins-id-items-itemid" aria-label="Permalink to &quot;DELETE /api/bins/\`{id}\`/items/\`{itemId}\`&quot;">​</a></h3><p>Removes a single item from a bin.</p><p><strong>Path parameters</strong>: <code>id</code> (bin ID), <code>itemId</code> (item UUID)</p><p><strong>Response (200)</strong>: Empty body.</p><hr><h3 id="put-api-bins-id-items-reorder" tabindex="-1">PUT /api/bins/<code>{id}</code>/items/reorder <a class="header-anchor" href="#put-api-bins-id-items-reorder" aria-label="Permalink to &quot;PUT /api/bins/\`{id}\`/items/reorder&quot;">​</a></h3><p>Reorders items within a bin.</p><p><strong>Path parameters</strong>: <code>id</code> (bin ID)</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>item_ids</code></td><td>UUID[]</td><td>Yes</td><td>Item IDs in the desired order</td></tr></tbody></table><p><strong>Response (200)</strong>: Empty body.</p><hr><h2 id="photos" tabindex="-1">Photos <a class="header-anchor" href="#photos" aria-label="Permalink to &quot;Photos&quot;">​</a></h2><p>Photo retrieval and deletion. Photo upload is on the Bins route (<code>POST /api/bins/{id}/photos</code>).</p><hr><h3 id="get-api-photos" tabindex="-1">GET /api/photos <a class="header-anchor" href="#get-api-photos" aria-label="Permalink to &quot;GET /api/photos&quot;">​</a></h3><p>Lists all photos for a bin.</p><p><strong>Query parameters</strong></p><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>bin_id</code></td><td>UUID</td><td>Yes</td><td></td></tr></tbody></table><p><strong>Response (200)</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;results&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;bin_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;filename&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;photo.jpg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;mime_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image/jpeg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;size&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">204800</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;storage_path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;created_by&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;created_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="get-api-photos-id-file" tabindex="-1">GET /api/photos/<code>{id}</code>/file <a class="header-anchor" href="#get-api-photos-id-file" aria-label="Permalink to &quot;GET /api/photos/\`{id}\`/file&quot;">​</a></h3><p>Serves the full-size photo binary. Auth is required via cookie or Bearer header. Returns an immutable 1-year cache header.</p><p><strong>Path parameters</strong>: <code>id</code> (photo UUID)</p><p><strong>Query parameters</strong></p><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>token</code></td><td>string</td><td>No</td><td>JWT token as an alternative to the Authorization header</td></tr></tbody></table><p><strong>Response (200)</strong>: Binary image (<code>image/*</code>).</p><div class="tip custom-block"><p class="custom-block-title">Thumbnail</p><p>A 600px WebP thumbnail is generated lazily on first request at <code>GET /api/photos/{id}/thumb</code> (not yet in the OpenAPI spec). Use <code>getPhotoThumbUrl(photoId)</code> in the frontend helpers.</p></div><hr><h3 id="delete-api-photos-id" tabindex="-1">DELETE /api/photos/<code>{id}</code> <a class="header-anchor" href="#delete-api-photos-id" aria-label="Permalink to &quot;DELETE /api/photos/\`{id}\`&quot;">​</a></h3><p>Deletes a photo record and removes the file from storage.</p><p><strong>Path parameters</strong>: <code>id</code> (photo UUID)</p><p><strong>Response (200)</strong>: <code>{ &quot;message&quot;: &quot;Photo deleted&quot; }</code></p><hr><h2 id="tagcolors" tabindex="-1">TagColors <a class="header-anchor" href="#tagcolors" aria-label="Permalink to &quot;TagColors&quot;">​</a></h2><p>Per-location color assignments for tags.</p><hr><h3 id="get-api-tag-colors" tabindex="-1">GET /api/tag-colors <a class="header-anchor" href="#get-api-tag-colors" aria-label="Permalink to &quot;GET /api/tag-colors&quot;">​</a></h3><p>Lists all tag color assignments for a location.</p><p><strong>Query parameters</strong></p><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>location_id</code></td><td>UUID</td><td>Yes</td><td></td></tr></tbody></table><p><strong>Response (200)</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;results&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;location_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;tag&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;fragile&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;color&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;red-500&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;created_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;updated_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="put-api-tag-colors" tabindex="-1">PUT /api/tag-colors <a class="header-anchor" href="#put-api-tag-colors" aria-label="Permalink to &quot;PUT /api/tag-colors&quot;">​</a></h3><p>Creates or updates the color for a tag in a location (upsert).</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>locationId</code></td><td>UUID</td><td>Yes</td><td></td></tr><tr><td><code>tag</code></td><td>string</td><td>Yes</td><td>Tag name</td></tr><tr><td><code>color</code></td><td>string</td><td>Yes</td><td>Color preset key</td></tr></tbody></table><p><strong>Response (200)</strong>: The saved <code>TagColor</code> object.</p><hr><h3 id="delete-api-tag-colors-tag" tabindex="-1">DELETE /api/tag-colors/<code>{tag}</code> <a class="header-anchor" href="#delete-api-tag-colors-tag" aria-label="Permalink to &quot;DELETE /api/tag-colors/\`{tag}\`&quot;">​</a></h3><p>Removes the color assignment for a tag.</p><p><strong>Path parameters</strong>: <code>tag</code> (tag name)</p><p><strong>Query parameters</strong></p><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>location_id</code></td><td>UUID</td><td>Yes</td><td></td></tr></tbody></table><p><strong>Response (200)</strong>: <code>{ &quot;message&quot;: &quot;Tag color removed&quot; }</code></p><hr><h2 id="printsettings" tabindex="-1">PrintSettings <a class="header-anchor" href="#printsettings" aria-label="Permalink to &quot;PrintSettings&quot;">​</a></h2><p>Per-user label format and custom print dimension settings.</p><hr><h3 id="get-api-print-settings" tabindex="-1">GET /api/print-settings <a class="header-anchor" href="#get-api-print-settings" aria-label="Permalink to &quot;GET /api/print-settings&quot;">​</a></h3><p>Returns the authenticated user&#39;s saved label format and custom dimensions. Returns an empty object if no settings have been saved yet.</p><p><strong>Response (200)</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;user_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;settings&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* arbitrary JSON */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;created_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;updated_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="put-api-print-settings" tabindex="-1">PUT /api/print-settings <a class="header-anchor" href="#put-api-print-settings" aria-label="Permalink to &quot;PUT /api/print-settings&quot;">​</a></h3><p>Saves label format and custom dimension overrides for the authenticated user.</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>settings</code></td><td>object</td><td>Yes</td><td>Arbitrary JSON with label format, custom dimensions, etc.</td></tr></tbody></table><p><strong>Response (200)</strong>: The saved <code>PrintSettings</code> object.</p><hr><h2 id="export" tabindex="-1">Export <a class="header-anchor" href="#export" aria-label="Permalink to &quot;Export&quot;">​</a></h2><p>Export location data as JSON, ZIP, or CSV; import V1/V2 format data.</p><hr><h3 id="get-api-locations-id-export" tabindex="-1">GET /api/locations/<code>{id}</code>/export <a class="header-anchor" href="#get-api-locations-id-export" aria-label="Permalink to &quot;GET /api/locations/\`{id}\`/export&quot;">​</a></h3><p>Exports all location bins as a V2 JSON document. Photos are base64-encoded and embedded within each bin&#39;s <code>photos</code> array.</p><p><strong>Path parameters</strong>: <code>id</code> (location UUID)</p><p><strong>Response (200)</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exportedAt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2024-01-01T00:00:00Z&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;locationName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;My Workshop&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;bins&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ABC123&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Screws&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;items&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;M3x8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;M4x10&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;notes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Sorted by size&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;tags&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hardware&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;icon&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Wrench&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;color&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;blue-500&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;shortCode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ABC123&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;createdAt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;updatedAt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;photos&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;filename&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;photo.jpg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;mimeType&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image/jpeg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&lt;base64&gt;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="get-api-locations-id-export-zip" tabindex="-1">GET /api/locations/<code>{id}</code>/export/zip <a class="header-anchor" href="#get-api-locations-id-export-zip" aria-label="Permalink to &quot;GET /api/locations/\`{id}\`/export/zip&quot;">​</a></h3><p>Exports the location as a ZIP file containing a JSON manifest (<code>export.json</code>) and a <code>photos/</code> directory with image files.</p><p><strong>Path parameters</strong>: <code>id</code> (location UUID)</p><p><strong>Response (200)</strong>: Binary ZIP file (<code>application/zip</code>) as a download.</p><hr><h3 id="get-api-locations-id-export-csv" tabindex="-1">GET /api/locations/<code>{id}</code>/export/csv <a class="header-anchor" href="#get-api-locations-id-export-csv" aria-label="Permalink to &quot;GET /api/locations/\`{id}\`/export/csv&quot;">​</a></h3><p>Exports the location as a CSV spreadsheet. Columns: <code>name</code>, <code>area</code>, <code>items</code> (semicolon-separated), <code>tags</code> (semicolon-separated), <code>notes</code>, <code>icon</code>, <code>color</code>, <code>id</code>.</p><p><strong>Path parameters</strong>: <code>id</code> (location UUID)</p><p><strong>Response (200)</strong>: CSV text (<code>text/csv</code>) as a download.</p><hr><h3 id="post-api-locations-id-import" tabindex="-1">POST /api/locations/<code>{id}</code>/import <a class="header-anchor" href="#post-api-locations-id-import" aria-label="Permalink to &quot;POST /api/locations/\`{id}\`/import&quot;">​</a></h3><p>Imports bins and photos from a V1 or V2 export document. Supports <code>merge</code> (add to existing) and <code>replace</code> (clear all bins first) modes. Creates areas from location strings in V1 format. 50MB body size limit.</p><p><strong>Path parameters</strong>: <code>id</code> (location UUID)</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>version</code></td><td><code>1</code> or <code>2</code></td><td>Yes</td><td>Export format version</td></tr><tr><td><code>bins</code></td><td>array</td><td>Yes</td><td>Bin objects matching the format version</td></tr><tr><td><code>exportedAt</code></td><td>string (date-time)</td><td>No</td><td></td></tr><tr><td><code>locationName</code></td><td>string</td><td>No</td><td></td></tr><tr><td><code>photos</code></td><td>array</td><td>No</td><td>Photo objects</td></tr><tr><td><code>mode</code></td><td><code>&quot;merge&quot;</code> or <code>&quot;replace&quot;</code></td><td>No</td><td>Default: <code>&quot;merge&quot;</code></td></tr></tbody></table><p><strong>Response (200)</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;imported&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">42</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;photos&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="post-api-import-legacy" tabindex="-1">POST /api/import/legacy <a class="header-anchor" href="#post-api-import-legacy" aria-label="Permalink to &quot;POST /api/import/legacy&quot;">​</a></h3><p>Imports data from the old V1 export format (freeform <code>contents</code> string instead of discrete items). Handles the <code>homeName</code> field mapping. 50MB body size limit. No location scoping — uses the authenticated user&#39;s context.</p><p><strong>Request body</strong>: Same <code>ImportRequest</code> schema as above.</p><p><strong>Response (200)</strong>: <code>{ &quot;imported&quot;: number, &quot;photos&quot;: number }</code></p><hr><h2 id="ai" tabindex="-1">AI <a class="header-anchor" href="#ai" aria-label="Permalink to &quot;AI&quot;">​</a></h2><p>AI provider configuration, photo analysis, text structuring, natural language commands, inventory queries, and server-side command execution.</p><hr><h3 id="get-api-ai-settings" tabindex="-1">GET /api/ai/settings <a class="header-anchor" href="#get-api-ai-settings" aria-label="Permalink to &quot;GET /api/ai/settings&quot;">​</a></h3><p>Returns the authenticated user&#39;s configured AI provider. The API key is masked in the response. Returns null if no AI has been configured.</p><p><strong>Response (200)</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;provider&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;openai&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;apiKey&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sk-•••••••••&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;model&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-4o&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;endpointUrl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;customPrompt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;commandPrompt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;queryPrompt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;structurePrompt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;source&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;providerConfigs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* per-provider cached credentials */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="put-api-ai-settings" tabindex="-1">PUT /api/ai/settings <a class="header-anchor" href="#put-api-ai-settings" aria-label="Permalink to &quot;PUT /api/ai/settings&quot;">​</a></h3><p>Saves AI provider configuration. The API key is encrypted at rest when the <code>AI_ENCRYPTION_KEY</code> environment variable is set. Rate limited to 30 per hour.</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>provider</code></td><td><code>&quot;openai&quot;</code>, <code>&quot;anthropic&quot;</code>, <code>&quot;gemini&quot;</code>, <code>&quot;openai-compatible&quot;</code></td><td>Yes</td><td></td></tr><tr><td><code>apiKey</code></td><td>string</td><td>Yes</td><td>Provider API key</td></tr><tr><td><code>model</code></td><td>string</td><td>Yes</td><td>Model identifier (e.g. <code>gpt-4o</code>)</td></tr><tr><td><code>endpointUrl</code></td><td>string</td><td>No</td><td>Required when <code>provider</code> is <code>&quot;openai-compatible&quot;</code></td></tr><tr><td><code>customPrompt</code></td><td>string or null</td><td>No</td><td>Custom system prompt for image analysis. Max 10,000 characters. Use <code>{available_tags}</code> placeholder to inject existing tags.</td></tr><tr><td><code>commandPrompt</code></td><td>string or null</td><td>No</td><td>Custom system prompt for natural language commands. Max 10,000 characters.</td></tr><tr><td><code>queryPrompt</code></td><td>string or null</td><td>No</td><td>Custom system prompt for inventory queries. Max 10,000 characters.</td></tr><tr><td><code>structurePrompt</code></td><td>string or null</td><td>No</td><td>Custom system prompt for item extraction from text/voice. Max 10,000 characters.</td></tr></tbody></table><p><strong>Response (200)</strong>: Saved <code>AiSettings</code> object.</p><hr><h3 id="delete-api-ai-settings" tabindex="-1">DELETE /api/ai/settings <a class="header-anchor" href="#delete-api-ai-settings" aria-label="Permalink to &quot;DELETE /api/ai/settings&quot;">​</a></h3><p>Removes the authenticated user&#39;s AI provider configuration.</p><p><strong>Response (200)</strong>: <code>{ &quot;message&quot;: &quot;AI settings deleted&quot; }</code></p><hr><h3 id="post-api-ai-analyze" tabindex="-1">POST /api/ai/analyze <a class="header-anchor" href="#post-api-ai-analyze" aria-label="Permalink to &quot;POST /api/ai/analyze&quot;">​</a></h3><p>Sends one or more stored photos (already uploaded to a bin) to the configured AI provider for analysis. Returns suggested bin name, items, tags, and notes. Maximum 5 photos per request. Rate limited to 30 per hour.</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>photoId</code></td><td>UUID</td><td>No</td><td>Single photo ID to analyze</td></tr><tr><td><code>photoIds</code></td><td>UUID[]</td><td>No</td><td>Multiple photo IDs (max 5). Takes precedence over <code>photoId</code>.</td></tr></tbody></table><p><strong>Response (200)</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Power Tools&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;items&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Cordless drill&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Jigsaw&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Sander&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;tags&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tools&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;electric&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;notes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Stored in the original cases&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="post-api-ai-analyze-image" tabindex="-1">POST /api/ai/analyze-image <a class="header-anchor" href="#post-api-ai-analyze-image" aria-label="Permalink to &quot;POST /api/ai/analyze-image&quot;">​</a></h3><p>Directly uploads images for AI analysis without storing them first. Used during onboarding. Accepts up to 5 images, 5MB each, via <code>multipart/form-data</code> with a <code>photos</code> file field. Rate limited to 30 per hour.</p><p><strong>Response (200)</strong>: Same <code>AiSuggestions</code> shape as <code>/ai/analyze</code>.</p><hr><h3 id="post-api-ai-test" tabindex="-1">POST /api/ai/test <a class="header-anchor" href="#post-api-ai-test" aria-label="Permalink to &quot;POST /api/ai/test&quot;">​</a></h3><p>Validates that AI credentials work by making a test call to the provider.</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>provider</code></td><td>string</td><td>Yes</td><td>Provider name</td></tr><tr><td><code>apiKey</code></td><td>string</td><td>Yes</td><td>API key to test</td></tr><tr><td><code>model</code></td><td>string</td><td>Yes</td><td>Model to test</td></tr><tr><td><code>endpointUrl</code></td><td>string</td><td>No</td><td>Required for <code>openai-compatible</code></td></tr></tbody></table><p><strong>Response (200)</strong>: <code>{ &quot;success&quot;: true, &quot;message&quot;: &quot;Connection successful&quot; }</code></p><hr><h3 id="post-api-ai-structure-text" tabindex="-1">POST /api/ai/structure-text <a class="header-anchor" href="#post-api-ai-structure-text" aria-label="Permalink to &quot;POST /api/ai/structure-text&quot;">​</a></h3><p>Sends raw dictated or typed text to the AI provider, which extracts and normalizes it into a clean list of inventory items. Handles filler words, quantity normalization, and deduplication. Rate limited to 30 per hour.</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>text</code></td><td>string</td><td>Yes</td><td>Raw text to structure. Max 5,000 characters.</td></tr><tr><td><code>mode</code></td><td><code>&quot;items&quot;</code></td><td>No</td><td>Structuring mode. Only <code>&quot;items&quot;</code> is currently supported.</td></tr><tr><td><code>context.binName</code></td><td>string</td><td>No</td><td>Name of the bin for context</td></tr><tr><td><code>context.existingItems</code></td><td>string[]</td><td>No</td><td>Items already in the bin (excluded from results)</td></tr></tbody></table><p><strong>Response (200)</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;items&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Phillips screwdriver&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Flat-head screwdriver&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Allen key set&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="post-api-ai-command" tabindex="-1">POST /api/ai/command <a class="header-anchor" href="#post-api-ai-command" aria-label="Permalink to &quot;POST /api/ai/command&quot;">​</a></h3><p>Parses a natural language command into structured inventory actions for client-side preview and execution. The client is responsible for displaying the parsed actions to the user before executing them via existing mutation endpoints. Rate limited to 30 per hour.</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>text</code></td><td>string</td><td>Yes</td><td>Natural language command. Max 5,000 characters.</td></tr><tr><td><code>locationId</code></td><td>string</td><td>Yes</td><td>Location ID to scope the command context</td></tr></tbody></table><p><strong>Response (200)</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;actions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;add_items&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;bin_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;items&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;AAA batteries&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;add_tags&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;bin_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;tags&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;consumables&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;interpretation&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Add AAA batteries to the Electronics bin and tag it as consumables&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Supported action types: <code>add_items</code>, <code>remove_items</code>, <code>modify_item</code>, <code>create_bin</code>, <code>delete_bin</code>, <code>add_tags</code>, <code>remove_tags</code>, <code>modify_tag</code>, <code>set_area</code>, <code>set_notes</code>, <code>set_icon</code>, <code>set_color</code>.</p><hr><h3 id="post-api-ai-query" tabindex="-1">POST /api/ai/query <a class="header-anchor" href="#post-api-ai-query" aria-label="Permalink to &quot;POST /api/ai/query&quot;">​</a></h3><p>Read-only endpoint that answers natural language questions about the inventory. Returns a natural language answer plus structured matches with bin details. Ideal for smart home integrations.</p><p>Rate limits: 30/hour for JWT auth; 1,000/hour for API keys.</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>question</code></td><td>string</td><td>Yes</td><td>Natural language question. Max 5,000 characters.</td></tr><tr><td><code>locationId</code></td><td>UUID</td><td>Yes</td><td>Location to search within</td></tr></tbody></table><p><strong>Response (200)</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;answer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;AAA batteries are in the Electronics bin (Garage area).&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;matches&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;bin_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Electronics&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;area_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Garage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;items&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;AAA batteries&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;AA batteries&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;tags&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;consumables&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;relevance&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Contains the item you asked about&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="post-api-ai-execute" tabindex="-1">POST /api/ai/execute <a class="header-anchor" href="#post-api-ai-execute" aria-label="Permalink to &quot;POST /api/ai/execute&quot;">​</a></h3><p>Headless fire-and-forget endpoint. Parses a natural language command and executes all resulting actions server-side in a single transaction. Unlike <code>/ai/command</code> (which returns actions for client-side preview), this endpoint performs the mutations directly. Ideal for smart home integrations and automation pipelines.</p><p>Rate limits: 30/hour for JWT auth; 1,000/hour for API keys.</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>text</code></td><td>string</td><td>Yes</td><td>Natural language command. Max 5,000 characters.</td></tr><tr><td><code>locationId</code></td><td>UUID</td><td>Yes</td><td>Location to execute the command in</td></tr></tbody></table><p><strong>Response (200)</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;executed&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;add_items&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;details&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Added [AAA batteries] to Electronics&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;bin_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;bin_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Electronics&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;interpretation&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Added AAA batteries to the Electronics bin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;errors&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h2 id="activity" tabindex="-1">Activity <a class="header-anchor" href="#activity" aria-label="Permalink to &quot;Activity&quot;">​</a></h2><p>Paginated location activity log.</p><hr><h3 id="get-api-locations-locationid-activity" tabindex="-1">GET /api/locations/<code>{locationId}</code>/activity <a class="header-anchor" href="#get-api-locations-locationid-activity" aria-label="Permalink to &quot;GET /api/locations/\`{locationId}\`/activity&quot;">​</a></h3><p>Returns paginated activity log entries for a location. Entries are auto-pruned based on the location&#39;s <code>activity_retention_days</code> setting (default 90). Supports filtering by entity type and specific entity ID.</p><p><strong>Path parameters</strong>: <code>locationId</code> (UUID)</p><p><strong>Query parameters</strong></p><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>limit</code></td><td>integer (1–100)</td><td>50</td><td>Page size</td></tr><tr><td><code>offset</code></td><td>integer</td><td>0</td><td>Rows to skip for pagination</td></tr><tr><td><code>entity_type</code></td><td>string</td><td>—</td><td>Filter by entity type: <code>bin</code>, <code>photo</code>, <code>area</code>, <code>member</code></td></tr><tr><td><code>entity_id</code></td><td>UUID</td><td>—</td><td>Filter by specific entity ID</td></tr></tbody></table><p><strong>Response (200)</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;results&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;location_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;user_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;user_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;alice&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;display_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Alice&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;action&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bin_created&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;entity_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;entity_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;entity_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Screws&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;changes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;auth_method&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;jwt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;api_key_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;created_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">284</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h2 id="apikeys" tabindex="-1">ApiKeys <a class="header-anchor" href="#apikeys" aria-label="Permalink to &quot;ApiKeys&quot;">​</a></h2><p>API key creation, listing, and revocation for headless access.</p><hr><h3 id="get-api-api-keys" tabindex="-1">GET /api/api-keys <a class="header-anchor" href="#get-api-api-keys" aria-label="Permalink to &quot;GET /api/api-keys&quot;">​</a></h3><p>Lists the authenticated user&#39;s active (non-revoked) API keys. The full key value is never returned after creation.</p><p><strong>Response (200)</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;results&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;key_prefix&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sk_openbin_abc123&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Home Assistant&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;created_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;last_used_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;revoked_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="post-api-api-keys" tabindex="-1">POST /api/api-keys <a class="header-anchor" href="#post-api-api-keys" aria-label="Permalink to &quot;POST /api/api-keys&quot;">​</a></h3><p>Creates a new API key. The full key is returned <strong>only once</strong> in this response and cannot be retrieved later. Maximum 10 active keys per user. Keys use the format <code>sk_openbin_&lt;64 hex chars&gt;</code>.</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td>string</td><td>No</td><td>A human-readable label. Max 255 characters.</td></tr></tbody></table><p><strong>Response (201)</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sk_openbin_&lt;64 hex chars&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;keyPrefix&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sk_openbin_abc123&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Home Assistant&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">Save the key now</p><p>The full API key is only returned at creation time. Store it securely — it cannot be retrieved again.</p></div><hr><h3 id="delete-api-api-keys-id" tabindex="-1">DELETE /api/api-keys/<code>{id}</code> <a class="header-anchor" href="#delete-api-api-keys-id" aria-label="Permalink to &quot;DELETE /api/api-keys/\`{id}\`&quot;">​</a></h3><p>Revokes an API key by setting <code>revoked_at</code>. The key stops working immediately.</p><p><strong>Path parameters</strong>: <code>id</code> (API key UUID)</p><p><strong>Response (200)</strong>: <code>{ &quot;message&quot;: &quot;Key revoked&quot; }</code></p><hr><h2 id="userpreferences" tabindex="-1">UserPreferences <a class="header-anchor" href="#userpreferences" aria-label="Permalink to &quot;UserPreferences&quot;">​</a></h2><p>Arbitrary per-user application preference storage.</p><hr><h3 id="get-api-user-preferences" tabindex="-1">GET /api/user-preferences <a class="header-anchor" href="#get-api-user-preferences" aria-label="Permalink to &quot;GET /api/user-preferences&quot;">​</a></h3><p>Returns the authenticated user&#39;s application preferences as a JSON object. Returns null if no preferences have been saved.</p><p><strong>Response (200)</strong>: Arbitrary JSON preferences object, or null.</p><hr><h3 id="put-api-user-preferences" tabindex="-1">PUT /api/user-preferences <a class="header-anchor" href="#put-api-user-preferences" aria-label="Permalink to &quot;PUT /api/user-preferences&quot;">​</a></h3><p>Saves application preferences for the authenticated user. Creates or updates the existing record.</p><p><strong>Request body</strong>: Any valid JSON object with preference key-value pairs.</p><p><strong>Response (200)</strong>: The saved preferences object.</p><hr><h2 id="savedviews" tabindex="-1">SavedViews <a class="header-anchor" href="#savedviews" aria-label="Permalink to &quot;SavedViews&quot;">​</a></h2><p>Per-user saved bin list filter and sort views (max 10 per user).</p><hr><h3 id="get-api-saved-views" tabindex="-1">GET /api/saved-views <a class="header-anchor" href="#get-api-saved-views" aria-label="Permalink to &quot;GET /api/saved-views&quot;">​</a></h3><p>Lists all saved views for the authenticated user.</p><p><strong>Response (200)</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;results&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Garage — Unorganized&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;search_query&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;sort&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;updated_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;filters&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;areas&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;needs_organizing&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;created_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="post-api-saved-views" tabindex="-1">POST /api/saved-views <a class="header-anchor" href="#post-api-saved-views" aria-label="Permalink to &quot;POST /api/saved-views&quot;">​</a></h3><p>Creates a new saved view. Maximum 10 per user.</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td>string</td><td>Yes</td><td>Display name for the view</td></tr><tr><td><code>searchQuery</code></td><td>string</td><td>No</td><td>Search query to save</td></tr><tr><td><code>sort</code></td><td>string</td><td>No</td><td>Sort field</td></tr><tr><td><code>filters</code></td><td>object</td><td>No</td><td>Filter criteria as a JSON object</td></tr></tbody></table><p><strong>Response (201)</strong>: The created <code>SavedView</code> object.</p><hr><h3 id="put-api-saved-views-id" tabindex="-1">PUT /api/saved-views/<code>{id}</code> <a class="header-anchor" href="#put-api-saved-views-id" aria-label="Permalink to &quot;PUT /api/saved-views/\`{id}\`&quot;">​</a></h3><p>Renames a saved view. Must be owned by the authenticated user.</p><p><strong>Path parameters</strong>: <code>id</code> (UUID)</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td>string</td><td>Yes</td><td>New name</td></tr></tbody></table><p><strong>Response (200)</strong>: Updated <code>SavedView</code> object.</p><hr><h3 id="delete-api-saved-views-id" tabindex="-1">DELETE /api/saved-views/<code>{id}</code> <a class="header-anchor" href="#delete-api-saved-views-id" aria-label="Permalink to &quot;DELETE /api/saved-views/\`{id}\`&quot;">​</a></h3><p>Deletes a saved view. Must be owned by the authenticated user.</p><p><strong>Path parameters</strong>: <code>id</code> (UUID)</p><p><strong>Response (204)</strong>: No content.</p><hr><h2 id="scanhistory" tabindex="-1">ScanHistory <a class="header-anchor" href="#scanhistory" aria-label="Permalink to &quot;ScanHistory&quot;">​</a></h2><p>Per-user QR code scan history.</p><hr><h3 id="get-api-scan-history" tabindex="-1">GET /api/scan-history <a class="header-anchor" href="#get-api-scan-history" aria-label="Permalink to &quot;GET /api/scan-history&quot;">​</a></h3><p>Returns the authenticated user&#39;s recent QR scan history, ordered by most recent first.</p><p><strong>Query parameters</strong></p><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>limit</code></td><td>integer (1–100)</td><td>20</td><td>Maximum number of entries to return</td></tr></tbody></table><p><strong>Response (200)</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;results&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;bin_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;scanned_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2024-01-15T10:30:00Z&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="post-api-scan-history" tabindex="-1">POST /api/scan-history <a class="header-anchor" href="#post-api-scan-history" aria-label="Permalink to &quot;POST /api/scan-history&quot;">​</a></h3><p>Records a bin scan. If the bin was previously scanned, updates the timestamp rather than creating a duplicate entry. Automatically trims history to a maximum of 100 entries.</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>binId</code></td><td>UUID</td><td>Yes</td><td>The bin that was scanned</td></tr></tbody></table><p><strong>Response (201)</strong>: <code>{ &quot;ok&quot;: true }</code></p><hr><h3 id="delete-api-scan-history" tabindex="-1">DELETE /api/scan-history <a class="header-anchor" href="#delete-api-scan-history" aria-label="Permalink to &quot;DELETE /api/scan-history&quot;">​</a></h3><p>Clears all scan history entries for the authenticated user.</p><p><strong>Response (204)</strong>: No content.</p><hr><h2 id="batch" tabindex="-1">Batch <a class="header-anchor" href="#batch" aria-label="Permalink to &quot;Batch&quot;">​</a></h2><p>Execute up to 50 bin operations atomically in a single request.</p><hr><h3 id="post-api-batch" tabindex="-1">POST /api/batch <a class="header-anchor" href="#post-api-batch" aria-label="Permalink to &quot;POST /api/batch&quot;">​</a></h3><p>Executes multiple bin operations in one transaction. Uses a partial-success model: individual operation failures are reported in the <code>errors</code> array while the remaining successful operations are committed. Ideal for AI agents, MCP integrations, and bulk workflows.</p><p>Rate limits: 60/hour for JWT auth; 600/hour for API keys.</p><p><strong>Request body</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>locationId</code></td><td>UUID</td><td>Yes</td><td>Location to execute operations in</td></tr><tr><td><code>operations</code></td><td>array</td><td>Yes</td><td>1–50 operation objects</td></tr></tbody></table><p><strong>Operation object fields</strong></p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Applicable to</th><th>Description</th></tr></thead><tbody><tr><td><code>type</code></td><td>string</td><td>All</td><td>Operation type (see below)</td></tr><tr><td><code>bin_id</code></td><td>UUID</td><td>All except <code>create_bin</code></td><td>Target bin ID</td></tr><tr><td><code>bin_name</code></td><td>string</td><td>All except <code>create_bin</code></td><td>Bin name (for logging)</td></tr><tr><td><code>name</code></td><td>string</td><td><code>create_bin</code>, <code>update_bin</code></td><td>Bin name</td></tr><tr><td><code>items</code></td><td>string[]</td><td><code>add_items</code>, <code>remove_items</code>, <code>create_bin</code></td><td>Item names</td></tr><tr><td><code>tags</code></td><td>string[]</td><td><code>add_tags</code>, <code>remove_tags</code>, <code>create_bin</code>, <code>update_bin</code></td><td>Tag names</td></tr><tr><td><code>notes</code></td><td>string</td><td><code>set_notes</code>, <code>create_bin</code>, <code>update_bin</code></td><td>Notes text</td></tr><tr><td><code>mode</code></td><td><code>&quot;set&quot;</code>, <code>&quot;append&quot;</code>, <code>&quot;clear&quot;</code></td><td><code>set_notes</code></td><td>Notes update mode</td></tr><tr><td><code>area_id</code></td><td>UUID or null</td><td><code>set_area</code></td><td>Area UUID; null to unassign</td></tr><tr><td><code>area_name</code></td><td>string</td><td><code>set_area</code>, <code>create_bin</code>, <code>update_bin</code></td><td>Area name; auto-creates if needed</td></tr><tr><td><code>icon</code></td><td>string</td><td><code>set_icon</code>, <code>create_bin</code>, <code>update_bin</code></td><td>Icon identifier</td></tr><tr><td><code>color</code></td><td>string</td><td><code>set_color</code>, <code>create_bin</code>, <code>update_bin</code></td><td>Color value</td></tr><tr><td><code>old_item</code></td><td>string</td><td><code>modify_item</code></td><td>Current item name to rename</td></tr><tr><td><code>new_item</code></td><td>string</td><td><code>modify_item</code></td><td>New item name</td></tr><tr><td><code>old_tag</code></td><td>string</td><td><code>modify_tag</code></td><td>Current tag name to rename</td></tr><tr><td><code>new_tag</code></td><td>string</td><td><code>modify_tag</code></td><td>New tag name</td></tr><tr><td><code>visibility</code></td><td><code>&quot;location&quot;</code> or <code>&quot;private&quot;</code></td><td><code>update_bin</code></td><td>Bin visibility</td></tr></tbody></table><p><strong>Supported operation types</strong>: <code>create_bin</code>, <code>update_bin</code>, <code>delete_bin</code>, <code>restore_bin</code>, <code>add_items</code>, <code>remove_items</code>, <code>modify_item</code>, <code>add_tags</code>, <code>remove_tags</code>, <code>modify_tag</code>, <code>set_area</code>, <code>set_notes</code>, <code>set_icon</code>, <code>set_color</code>.</p><p><strong>Example request</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;locationId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;550e8400-e29b-41d4-a716-446655440000&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;operations&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;add_tags&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;bin_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;6ba7b810-9dad-11d1-80b4-00c04fd430c8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;bin_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Tools&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;tags&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;fragile&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;set_area&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;bin_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;6ba7b811-9dad-11d1-80b4-00c04fd430c8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;bin_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Supplies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;area_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Garage&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;create_bin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;New Bin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;items&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;item1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;tags&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;new&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>Response (200)</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;results&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;add_tags&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;details&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Added tags [fragile] to Tools&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;bin_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;6ba7b810-9dad-11d1-80b4-00c04fd430c8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;bin_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Tools&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;set_area&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;details&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Set area of Supplies to </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Garage</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;bin_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;6ba7b811-9dad-11d1-80b4-00c04fd430c8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;bin_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Supplies&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;create_bin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;details&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Created bin </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">New Bin</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;bin_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a1b2c3d4-e5f6-7890-abcd-ef1234567890&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;bin_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;New Bin&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;errors&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div>`,549)])])}const E=t(n,[["render",o]]);export{c as __pageData,E as default};
